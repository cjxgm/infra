# vim: ts=4 sw=4 sts=4 et
# Maintainer: Giumo Clanjor <cjxgm2@gmail.com>
pkgname=infra-internet
pkgver=0.2.0
pkgrel=1
pkgdesc="Provide access to THE internet."
arch=(any)
license=('GPL3')
groups=(infra)
depends=(infra-secretary shadowsocks-libev)
source=(
    secret-password.json
    internet-service.service
    internet.service
    internet.socket
)
sha512sums=(
    SKIP
    SKIP
    SKIP
    SKIP
)

package()
{
    install -Dm 644 "$srcdir/secret-password.json" "$pkgdir/usr/lib/infra/internet/secret-password.json"
    install -Dm 644 "$srcdir/internet-service.service" "$pkgdir/usr/lib/systemd/system/infra-internet-service.service"
    install -Dm 644 "$srcdir/internet.service" "$pkgdir/usr/lib/systemd/system/infra-internet.service"
    install -Dm 644 "$srcdir/internet.socket" "$pkgdir/usr/lib/systemd/system/infra-internet.socket"
    install -d "$pkgdir/usr/lib/systemd/system/sockets.target.wants"
    ln -s "/usr/lib/systemd/system/infra-internet.socket" "$pkgdir/usr/lib/systemd/system/sockets.target.wants/"
}

